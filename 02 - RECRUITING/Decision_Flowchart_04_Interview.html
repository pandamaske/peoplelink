<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Decision Flowchart - Interview - GEODIS HCM</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --geodis-blue: #3200eb; --geodis-blue-dark: #2800c0; --geodis-blue-light: #ebe6ff;
            --geodis-orange: #eb692b; --geodis-orange-light: #fff5f0;
            --geodis-purple: #8B5CF6; --geodis-green: #10B981; --geodis-red: #EF4444;
            --lane-recruiter: #F59E0B; --lane-recruiter-light: #FEF3C7;
            --lane-interviewer: #8B5CF6; --lane-interviewer-light: #EDE9FE;
            --lane-candidate: #10B981; --lane-candidate-light: #D1FAE5;
            --lane-hiring-manager: #3B82F6; --lane-hiring-manager-light: #DBEAFE;
            --lane-system: #6B7280; --lane-system-light: #F3F4F6;
            --gray-50: #F9FAFB; --gray-100: #F3F4F6; --gray-200: #E5E7EB; --gray-400: #9CA3AF;
            --gray-500: #6B7280; --gray-600: #4B5563; --gray-700: #374151; --gray-800: #1F2937; --gray-900: #111827; --white: #FFFFFF;
            --shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1); --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1); --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            --radius: 8px; --radius-sm: 4px; --radius-lg: 16px; --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --lane-height: 120px; --step-width: 140px;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Inter', sans-serif; background-color: #F9FAFB; min-height: 100vh; color: var(--gray-800); display: flex; flex-direction: column; }
        .header { background-color: white; border-bottom: 1px solid #E5E7EB; box-shadow: var(--shadow); position: sticky; top: 0; z-index: 1000; }
        .header-content { padding: 0 2rem; display: flex; align-items: center; height: 72px; gap: 2rem; }
        .logo-section { display: flex; align-items: center; gap: 0.75rem; }
        .geodis-logo { height: 40px; }
        .logo-divider { border-left: 2px solid #E5E7EB; padding-left: 0.75rem; margin-left: 0.5rem; display: flex; align-items: center; gap: 0.75rem; }
        .app-icon { width: 40px; height: 40px; color: var(--geodis-orange); }
        .app-title h1 { font-family: 'Poppins', sans-serif; font-size: 1.1rem; font-weight: 600; color: var(--geodis-blue-dark); }
        .app-title p { font-size: 0.75rem; color: #6B7280; }
        .header-controls { margin-left: auto; display: flex; gap: 1rem; align-items: center; }
        .nav-links { display: flex; gap: 0.5rem; }
        .nav-link { padding: 0.5rem 1rem; background: var(--gray-100); color: var(--gray-600); font-size: 0.8rem; font-weight: 500; border-radius: var(--radius-sm); text-decoration: none; display: flex; align-items: center; gap: 0.4rem; border: none; cursor: pointer; transition: var(--transition); }
        .nav-link:hover { background: var(--gray-200); color: var(--gray-800); }
        .nav-link.active { background: var(--geodis-blue); color: var(--white); }
        .zoom-controls { display: flex; gap: 0.25rem; background: var(--gray-100); border-radius: var(--radius); padding: 4px; }
        .zoom-btn { width: 32px; height: 32px; border: none; background: transparent; color: var(--gray-600); cursor: pointer; border-radius: var(--radius-sm); display: flex; align-items: center; justify-content: center; }
        .zoom-btn:hover { background: var(--gray-200); color: var(--geodis-blue); }
        .main-content { flex: 1; padding: 2rem; }
        .phase-header { background: var(--white); border-radius: var(--radius-lg); padding: 1.5rem 2rem; margin-bottom: 1.5rem; box-shadow: var(--shadow-md); display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 1rem; }
        .phase-info h2 { font-family: 'Poppins', sans-serif; font-size: 1.5rem; color: var(--gray-900); display: flex; align-items: center; gap: 0.75rem; }
        .phase-info h2 .phase-icon { width: 40px; height: 40px; background: linear-gradient(135deg, var(--geodis-blue), var(--geodis-blue-dark)); border-radius: var(--radius); display: flex; align-items: center; justify-content: center; color: var(--white); }
        .phase-info p { color: var(--gray-600); margin-top: 0.25rem; margin-left: 52px; }
        .phase-stats { display: flex; gap: 1rem; }
        .stat-box { background: var(--geodis-blue-light); border: 1px solid var(--geodis-blue); border-radius: var(--radius); padding: 0.75rem 1.25rem; text-align: center; }
        .stat-box .value { font-size: 1.25rem; font-weight: 700; color: var(--geodis-blue); }
        .stat-box .label { font-size: 0.7rem; color: var(--geodis-blue-dark); text-transform: uppercase; }
        .stat-box.orange { background: var(--geodis-orange-light); border-color: var(--geodis-orange); }
        .stat-box.orange .value, .stat-box.orange .label { color: var(--geodis-orange); }
        .swimlane-wrapper { background: var(--white); border-radius: var(--radius-lg); box-shadow: var(--shadow-lg); overflow: hidden; }
        .swimlane-legend { padding: 1rem 1.5rem; background: linear-gradient(to right, var(--gray-50), var(--white)); border-bottom: 1px solid var(--gray-200); display: flex; flex-wrap: wrap; gap: 1.5rem; align-items: center; }
        .legend-title { font-weight: 600; color: var(--geodis-blue); font-size: 0.875rem; display: flex; align-items: center; gap: 0.5rem; }
        .legend-items { display: flex; flex-wrap: wrap; gap: 1rem; }
        .legend-item { display: flex; align-items: center; gap: 0.4rem; font-size: 0.8rem; color: var(--gray-600); }
        .legend-dot { width: 12px; height: 12px; border-radius: 50%; }
        .legend-shape.diamond { width: 14px; height: 14px; background: var(--geodis-orange-light); border: 2px solid var(--geodis-orange); transform: rotate(45deg); }
        .legend-line { width: 30px; height: 3px; border-radius: 2px; }
        .swimlane-canvas { position: relative; overflow-x: auto; overflow-y: hidden; }
        .swimlane-diagram { display: flex; min-width: max-content; position: relative; }
        .lane-labels { position: sticky; left: 0; z-index: 100; background: var(--white); border-right: 2px solid var(--gray-200); box-shadow: 4px 0 8px rgba(0,0,0,0.05); }
        .lane-label { height: var(--lane-height); width: 180px; padding: 0.75rem 1rem; display: flex; align-items: center; gap: 0.75rem; border-bottom: 1px solid var(--gray-100); }
        .lane-icon { width: 36px; height: 36px; border-radius: var(--radius); display: flex; align-items: center; justify-content: center; color: var(--white); font-size: 0.9rem; }
        .lane-info h4 { font-size: 0.8rem; font-weight: 600; color: var(--gray-800); }
        .lane-info span { font-size: 0.7rem; color: var(--gray-500); }
        .lanes-content { flex: 1; position: relative; }
        .connectors-layer { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 50; }
        .connector-path { fill: none; stroke-width: 2; stroke-linecap: round; }
        .connector-path.forward { stroke: var(--geodis-blue); }
        .connector-path.yes { stroke: var(--geodis-green); stroke-width: 2.5; }
        .connector-path.no { stroke: var(--geodis-red); stroke-width: 2.5; }
        .connector-path.return { stroke: var(--geodis-purple); stroke-dasharray: 8 4; }
        .connector-path.animated { animation: flowAnimation 1s linear infinite; }
        @keyframes flowAnimation { from { stroke-dashoffset: 12; } to { stroke-dashoffset: 0; } }
        .connector-label { font-family: 'Inter', sans-serif; font-size: 10px; font-weight: 600; }
        .lane-row { height: var(--lane-height); position: relative; border-bottom: 1px solid var(--gray-100); }
        .lane-row.lane-recruiter { background: var(--lane-recruiter-light); }
        .lane-row.lane-interviewer { background: var(--lane-interviewer-light); }
        .lane-row.lane-candidate { background: var(--lane-candidate-light); }
        .lane-row.lane-hiring-manager { background: var(--lane-hiring-manager-light); }
        .lane-row.lane-system { background: var(--lane-system-light); }
        .lane-label.lane-recruiter .lane-icon { background: var(--lane-recruiter); }
        .lane-label.lane-interviewer .lane-icon { background: var(--lane-interviewer); }
        .lane-label.lane-candidate .lane-icon { background: var(--lane-candidate); }
        .lane-label.lane-hiring-manager .lane-icon { background: var(--lane-hiring-manager); }
        .lane-label.lane-system .lane-icon { background: var(--lane-system); }
        .step-block { position: absolute; width: var(--step-width); padding: 0.6rem 0.75rem; background: var(--white); border-radius: var(--radius); border: 2px solid; box-shadow: var(--shadow); cursor: pointer; transition: var(--transition); z-index: 60; }
        .step-block:hover { transform: translateY(-3px); box-shadow: var(--shadow-lg); z-index: 70; }
        .step-block.lane-recruiter { border-color: var(--lane-recruiter); }
        .step-block.lane-recruiter .step-number { background: var(--lane-recruiter); }
        .step-block.lane-interviewer { border-color: var(--lane-interviewer); }
        .step-block.lane-interviewer .step-number { background: var(--lane-interviewer); }
        .step-block.lane-candidate { border-color: var(--lane-candidate); }
        .step-block.lane-candidate .step-number { background: var(--lane-candidate); }
        .step-block.lane-hiring-manager { border-color: var(--lane-hiring-manager); }
        .step-block.lane-hiring-manager .step-number { background: var(--lane-hiring-manager); }
        .step-block.lane-system { border-color: var(--lane-system); }
        .step-block.lane-system .step-number { background: var(--lane-system); }
        .step-block.start { border-color: var(--geodis-green); background: linear-gradient(135deg, #D1FAE5, #ECFDF5); }
        .step-block.start .step-number { background: var(--geodis-green); }
        .step-block.end { border-color: var(--geodis-purple); background: linear-gradient(135deg, #EDE9FE, #F5F3FF); }
        .step-block.end .step-number { background: var(--geodis-purple); }
        .step-block.reject { border-color: var(--geodis-red); background: #FEE2E2; }
        .step-block.reject .step-number { background: var(--geodis-red); }
        .step-block.highlighted { animation: pulseGlow 2s ease-in-out infinite; }
        @keyframes pulseGlow { 0%, 100% { box-shadow: var(--shadow); } 50% { box-shadow: 0 0 20px rgba(50, 0, 235, 0.4); } }
        .step-header { display: flex; align-items: center; gap: 0.4rem; margin-bottom: 0.3rem; }
        .step-number { width: 20px; height: 20px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 0.65rem; font-weight: 700; color: var(--white); }
        .step-icon { font-size: 0.75rem; opacity: 0.7; }
        .step-title { font-size: 0.75rem; font-weight: 600; color: var(--gray-800); }
        .step-meta { font-size: 0.65rem; color: var(--gray-500); margin-top: 0.25rem; display: flex; align-items: center; gap: 0.3rem; }
        .decision-block { position: absolute; width: 80px; height: 80px; z-index: 60; cursor: pointer; }
        .decision-diamond { width: 55px; height: 55px; background: var(--white); border: 2.5px solid var(--geodis-orange); transform: rotate(45deg); position: absolute; top: 12px; left: 12px; box-shadow: var(--shadow); transition: var(--transition); }
        .decision-block:hover .decision-diamond { transform: rotate(45deg) scale(1.1); box-shadow: var(--shadow-lg); }
        .decision-content { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; z-index: 2; }
        .decision-content .decision-id { font-size: 0.7rem; font-weight: 700; color: var(--geodis-orange); }
        .decision-content span { display: block; font-size: 0.6rem; font-weight: 600; color: var(--gray-600); }

        /* Modal Styles */
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.5); display: flex; align-items: center; justify-content: center; z-index: 2000; opacity: 0; visibility: hidden; transition: var(--transition); }
        .modal-overlay.active { opacity: 1; visibility: visible; }
        .modal { background: var(--white); border-radius: var(--radius-lg); box-shadow: var(--shadow-lg); max-width: 600px; width: 90%; max-height: 85vh; overflow: hidden; transform: scale(0.9); transition: var(--transition); }
        .modal-overlay.active .modal { transform: scale(1); }
        .modal-header { background: linear-gradient(135deg, var(--geodis-blue), var(--geodis-blue-dark)); color: var(--white); padding: 1.25rem 1.5rem; display: flex; align-items: center; justify-content: space-between; }
        .modal-header h3 { display: flex; align-items: center; gap: 0.75rem; font-family: 'Poppins', sans-serif; font-size: 1.1rem; font-weight: 600; }
        .modal-icon { width: 40px; height: 40px; border-radius: var(--radius); display: flex; align-items: center; justify-content: center; font-size: 1rem; }
        .modal-close { background: rgba(255, 255, 255, 0.2); border: none; color: var(--white); width: 36px; height: 36px; border-radius: var(--radius); cursor: pointer; display: flex; align-items: center; justify-content: center; transition: var(--transition); }
        .modal-close:hover { background: rgba(255, 255, 255, 0.3); }
        .modal-body { padding: 1.5rem; overflow-y: auto; max-height: calc(85vh - 80px); }
        .modal-section { margin-bottom: 1.25rem; }
        .modal-section:last-child { margin-bottom: 0; }
        .modal-section h4 { font-size: 0.8rem; font-weight: 600; color: var(--geodis-blue); margin-bottom: 0.5rem; display: flex; align-items: center; gap: 0.4rem; text-transform: uppercase; letter-spacing: 0.5px; }
        .modal-section h4 i { color: var(--geodis-orange); font-size: 0.75rem; }
        .modal-section p { color: var(--gray-600); font-size: 0.875rem; line-height: 1.6; }
        .info-row { display: flex; gap: 0.75rem; margin-bottom: 0.75rem; }
        .info-box { flex: 1; background: var(--gray-50); border: 1px solid var(--gray-200); border-radius: var(--radius); padding: 0.75rem; }
        .info-box label { display: block; font-size: 0.65rem; color: var(--gray-500); text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 0.2rem; }
        .info-box span { font-size: 0.85rem; font-weight: 600; color: var(--gray-800); }
        .tag-list { display: flex; flex-wrap: wrap; gap: 0.4rem; }
        .tag { background: var(--geodis-blue-light); border: 1px solid var(--geodis-blue); padding: 0.25rem 0.6rem; border-radius: 20px; font-size: 0.7rem; color: var(--geodis-blue-dark); font-weight: 500; }
        .rule-list { list-style: none; }
        .rule-list li { display: flex; align-items: flex-start; gap: 0.5rem; padding: 0.4rem 0; font-size: 0.8rem; color: var(--gray-600); border-bottom: 1px solid var(--gray-100); }
        .rule-list li:last-child { border-bottom: none; }
        .rule-list li i { color: var(--geodis-orange); margin-top: 0.2rem; font-size: 0.7rem; }

        .info-cards { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1rem; margin-top: 1.5rem; }
        .info-card { background: var(--gray-50); border: 1px solid var(--gray-200); border-radius: var(--radius); padding: 1rem; }
        .info-card h4 { font-size: 0.85rem; font-weight: 600; color: var(--geodis-blue); margin-bottom: 0.75rem; display: flex; align-items: center; gap: 0.5rem; }
        .info-card h4 i { color: var(--geodis-orange); }
        .info-card ul { list-style: none; font-size: 0.8rem; color: var(--gray-600); }
        .info-card li { padding: 0.3rem 0; display: flex; align-items: flex-start; gap: 0.5rem; }
        .info-card li i { color: var(--geodis-green); margin-top: 3px; font-size: 0.7rem; }
        .footer { background: white; border-top: 1px solid var(--gray-200); margin-top: auto; }
        .footer-content { padding: 1.5rem 2rem; }
        .footer-main { display: flex; flex-wrap: wrap; justify-content: space-between; align-items: center; gap: 1rem; }
        .footer-copyright { font-size: 0.875rem; color: var(--gray-600); }
        .footer-nav { display: flex; gap: 1rem; }
        .footer-nav a { font-size: 0.8rem; color: var(--geodis-blue); text-decoration: none; display: flex; align-items: center; gap: 0.3rem; }
        .tooltip { position: fixed; background: var(--gray-900); color: var(--white); padding: 0.75rem 1rem; border-radius: var(--radius); font-size: 0.8rem; max-width: 300px; z-index: 2000; pointer-events: none; opacity: 0; transition: opacity 0.2s ease; }
        .tooltip.visible { opacity: 1; }
        .tooltip h5 { font-weight: 600; margin-bottom: 0.3rem; color: var(--geodis-orange); }
        .tooltip p { font-size: 0.75rem; color: var(--gray-300); }
        ::-webkit-scrollbar { width: 10px; height: 10px; }
        ::-webkit-scrollbar-track { background: var(--gray-100); }
        ::-webkit-scrollbar-thumb { background: var(--gray-400); border-radius: 5px; }
        @media (max-width: 768px) { .nav-links, .phase-stats { display: none; } .lane-label { width: 120px; } }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-content">
            <div class="logo-section">
                <img src="https://d25zu39ynyitwy.cloudfront.net/oms/000000/image/2024/8/6RPG2_Logo/Logo_-1x-1.png" alt="GEODIS Logo" class="geodis-logo">
                <div class="logo-divider">
                    <svg class="app-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"/><path d="M9 14l2 2 4-4"/></svg>
                    <div class="app-title"><h1>Decision Flowchart</h1><p>Phase 4: Interview & Assessment</p></div>
                </div>
            </div>
            <div class="header-controls">
                <div class="nav-links">
                    <a href="Decision_Flowchart_01_Requisition.html" class="nav-link"><i class="fas fa-file-signature"></i> Requisition</a>
                    <a href="Decision_Flowchart_02_Posting.html" class="nav-link"><i class="fas fa-bullhorn"></i> Posting</a>
                    <a href="Decision_Flowchart_03_Screening.html" class="nav-link"><i class="fas fa-filter"></i> Screening</a>
                    <a href="Decision_Flowchart_04_Interview.html" class="nav-link active"><i class="fas fa-comments"></i> Interview</a>
                    <a href="Decision_Flowchart_05_Offer.html" class="nav-link"><i class="fas fa-file-contract"></i> Offer</a>
                    <a href="Decision_Flowchart_06_Hire.html" class="nav-link"><i class="fas fa-user-plus"></i> Hire</a>
                </div>
                <div class="zoom-controls">
                    <button class="zoom-btn" onclick="zoomOut()"><i class="fas fa-search-minus"></i></button>
                    <button class="zoom-btn" onclick="resetZoom()"><i class="fas fa-compress-arrows-alt"></i></button>
                    <button class="zoom-btn" onclick="zoomIn()"><i class="fas fa-search-plus"></i></button>
                </div>
            </div>
        </div>
    </header>

    <main class="main-content">
        <div class="phase-header">
            <div class="phase-info">
                <h2><span class="phase-icon"><i class="fas fa-comments"></i></span>Phase 4: Interview & Assessment</h2>
                <p><strong>GEODIS Policy:</strong> Multi-round structured interview process with 48h feedback SLA. Panel interviews for senior roles. Use structured interview guides and prohibit discriminatory questions.</p>
            </div>
            <div class="phase-stats">
                <div class="stat-box"><div class="value">10</div><div class="label">Steps</div></div>
                <div class="stat-box orange"><div class="value">3</div><div class="label">Decisions</div></div>
                <div class="stat-box"><div class="value">48h</div><div class="label">Feedback SLA</div></div>
            </div>
        </div>

        <div class="swimlane-wrapper">
            <div class="swimlane-legend">
                <div class="legend-title"><i class="fas fa-shapes"></i> Legend:</div>
                <div class="legend-items">
                    <div class="legend-item"><div class="legend-dot" style="background: var(--geodis-green);"></div><span>Start/End</span></div>
                    <div class="legend-item"><div class="legend-shape diamond"></div><span>Decision</span></div>
                    <div class="legend-item"><div class="legend-line" style="background: var(--geodis-blue);"></div><span>Forward</span></div>
                    <div class="legend-item"><div class="legend-line" style="background: var(--geodis-green);"></div><span>Pass</span></div>
                    <div class="legend-item"><div class="legend-line" style="background: var(--geodis-red);"></div><span>Reject</span></div>
                    <div class="legend-item"><div class="legend-line" style="background: var(--geodis-purple); border-top: 2px dashed var(--geodis-purple); height: 0;"></div><span>Next Round</span></div>
                    <div class="legend-item"><div class="legend-dot" style="background: #06B6D4;"></div><span>Paradox (Olivia)*</span></div>
                </div>
                <div style="margin-left: auto;">
                    <a href="Decision_Flowchart_Paradox_Availability.html" style="font-size: 0.75rem; color: var(--geodis-blue); text-decoration: none; display: flex; align-items: center; gap: 0.3rem;">
                        <i class="fas fa-info-circle"></i> *Paradox not available in all countries
                    </a>
                </div>
            </div>

            <div class="swimlane-canvas" id="canvas">
                <div class="swimlane-diagram" id="diagram">
                    <div class="lane-labels">
                        <div class="lane-label lane-recruiter"><div class="lane-icon"><i class="fas fa-user-friends"></i></div><div class="lane-info"><h4>Recruiter</h4><span>Schedules & coordinates</span></div></div>
                        <div class="lane-label lane-interviewer"><div class="lane-icon"><i class="fas fa-users"></i></div><div class="lane-info"><h4>Interviewer(s)</h4><span>Assesses candidates</span></div></div>
                        <div class="lane-label lane-candidate"><div class="lane-icon"><i class="fas fa-user"></i></div><div class="lane-info"><h4>Candidate</h4><span>Participates</span></div></div>
                        <div class="lane-label lane-hiring-manager"><div class="lane-icon"><i class="fas fa-user-tie"></i></div><div class="lane-info"><h4>Hiring Manager</h4><span>Final decision</span></div></div>
                        <div class="lane-label lane-system"><div class="lane-icon"><i class="fas fa-cog"></i></div><div class="lane-info"><h4>System</h4><span>Scheduling, tracking</span></div></div>
                    </div>

                    <div class="lanes-content" id="lanesContent">
                        <svg class="connectors-layer" id="connectors"></svg>

                        <!-- Lane Rows -->
                        <div class="lane-row lane-recruiter" id="lane0"></div>
                        <div class="lane-row lane-interviewer" id="lane1"></div>
                        <div class="lane-row lane-candidate" id="lane2"></div>
                        <div class="lane-row lane-hiring-manager" id="lane3"></div>
                        <div class="lane-row lane-system" id="lane4"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="info-cards">
            <div class="info-card">
                <h4><i class="fas fa-code-branch"></i> Decision Points</h4>
                <ul>
                    <li><i class="fas fa-check"></i> <strong>D1:</strong> Interview Pass/Fail (per round)</li>
                    <li><i class="fas fa-check"></i> <strong>D2:</strong> More Rounds Needed? (loop back)</li>
                    <li><i class="fas fa-check"></i> <strong>D3:</strong> HM Final Selection</li>
                </ul>
            </div>
            <div class="info-card">
                <h4><i class="fas fa-layer-group"></i> Interview Structure</h4>
                <ul>
                    <li><i class="fas fa-check"></i> 1) Introduction - GEODIS culture/values</li>
                    <li><i class="fas fa-check"></i> 2) Getting to know candidate - CV review</li>
                    <li><i class="fas fa-check"></i> 3) Capability questions - structured examples</li>
                    <li><i class="fas fa-check"></i> 4) Close - next steps</li>
                </ul>
            </div>
            <div class="info-card">
                <h4><i class="fas fa-clipboard-list"></i> Panel & Scheduling</h4>
                <ul>
                    <li><i class="fas fa-check"></i> Direct manager + Functional manager + HR</li>
                    <li><i class="fas fa-check"></i> Include at least one diversity interviewer</li>
                    <li><i class="fas fa-check"></i> Discriminatory questions PROHIBITED</li>
                    <li><i class="fas fa-check"></i> <strong>Paradox (Olivia):</strong> AI interview scheduling</li>
                </ul>
            </div>
        </div>
    </main>

    <footer class="footer">
        <div class="footer-content">
            <div class="footer-main">
                <div class="footer-copyright">&copy; 2024 GEODIS - HCM Recruitment Decision Flowchart</div>
                <div class="footer-nav">
                    <a href="Decision_Flowchart_03_Screening.html"><i class="fas fa-arrow-left"></i> Prev: Screening</a>
                    <a href="Decision_Flowchart_05_Offer.html"><i class="fas fa-arrow-right"></i> Next: Offer</a>
                </div>
            </div>
        </div>
    </footer>

    <div class="tooltip" id="tooltip"></div>

    <!-- Modal -->
    <div class="modal-overlay" id="modal">
        <div class="modal">
            <div class="modal-header">
                <h3>
                    <span class="modal-icon" id="modalIcon"></span>
                    <span id="modalTitleText">Step Title</span>
                </h3>
                <button class="modal-close" onclick="closeModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body" id="modalBody">
                <!-- Dynamic content -->
            </div>
        </div>
    </div>

    <script>
        // Constants
        const LANE_HEIGHT = 120;
        const STEP_WIDTH = 140;
        const V_CENTER = 60;
        const STEP_HEIGHT = 70;

        // Steps data - lane: 0=Recruiter, 1=Interviewer, 2=Candidate, 3=Hiring Manager, 4=System
        // Enriched with detailed GEODIS process information
        const steps = [
            { id: 'start', lane: 0, x: 30, label: 'FROM SCREEN', icon: 'fa-play', type: 'start', meta: 'Shortlist',
              desc: 'Shortlisted candidates from screening phase are ready for interview. Recruiter begins scheduling process. Interview phase includes: phone screen (if not done), HM interview, and panel interview for senior roles.',
              owner: 'Recruiter',
              duration: 'Transition',
              systems: ['Oracle Recruiting Cloud', 'G-Talent+'],
              rules: ['Shortlist approved by HM', 'Internal candidates flagged', 'Scheduling begins'],
              goodPractice: 'When pre-qualification is not necessary, start interview phase directly by inviting candidates to interview. Provide key information about the recruitment process.' },

            { id: 's1', lane: 0, x: 200, label: 'Schedule Interview', num: '1', icon: 'fa-calendar', meta: '1-2 days',
              desc: 'Recruiter coordinates interview scheduling. Paradox (Olivia) conversational AI can automate interview scheduling by coordinating candidate and interviewer availability through natural language conversations. Invite pre-selected candidates to face-to-face interview with Hiring Manager. Provide key information about recruitment process including number of interviews, tests, timeline. Calibrate panel on competencies before interviews begin.',
              owner: 'Recruiter / Paradox',
              duration: '1-2 days',
              systems: ['Oracle Recruiting Cloud', 'Paradox (Olivia)', 'Outlook Calendar', 'Microsoft Teams'],
              rules: ['Provide full process info upfront', 'Confirm interviewer availability', 'Allow adequate prep time', 'Panel calibration session', 'Paradox automates scheduling coordination'],
              goodPractice: 'Calibrate interview panel on competencies to ensure consistent, fair evaluation. Discuss structured interview guides and scoring approach. Paradox (Olivia) can automate scheduling coordination.',
              highlighted: true },

            { id: 's2', lane: 2, x: 400, label: 'Confirm & Attend', num: '2', icon: 'fa-check', meta: 'Candidate',
              desc: 'Candidate confirms interview time and attends phone screen or interview. Opportunity to confirm interest, discuss availability and salary expectations, and learn about the recruitment process structure and GEODIS culture.',
              owner: 'Candidate',
              duration: '20-60 min',
              systems: ['Microsoft Teams', 'Phone', 'On-site'],
              rules: ['Be prepared with availability dates', 'Salary expectations clarified', 'Professional presentation'],
              goodPractice: 'Candidates should prepare examples that demonstrate their capabilities aligned with the role requirements.' },

            { id: 's3', lane: 1, x: 600, label: 'HM Interview', num: '3', icon: 'fa-video', meta: '45-60 min',
              desc: 'Hiring Manager conducts structured interview following GEODIS guide: 1) Introduction - GEODIS culture/values, 2) Getting to know candidate - CV, 3) Capability questions - structured examples, 4) Close - next steps. Use structured interview guides. Discriminatory questions PROHIBITED.',
              owner: 'Hiring Manager',
              duration: '45-60 min',
              systems: ['Microsoft Teams', 'Oracle Recruiting Cloud', 'Structured Interview Guide'],
              rules: ['Follow structured interview guide', 'Discriminatory questions PROHIBITED', '4-part interview structure', 'Document observations'],
              goodPractice: 'Use structured interview guides. Interview structure: Introduction (GEODIS culture/values), Getting to know candidate (CV), Capability questions (examples), Close (next steps).',
              highlighted: true },

            { id: 's4', lane: 1, x: 820, label: 'Submit Feedback', num: '4', icon: 'fa-clipboard-check', meta: 'SLA: 48h',
              desc: 'Interviewer submits structured scorecard within 48-hour SLA. Feedback includes: competency ratings based on structured questions, behavioral observations, hire/no-hire recommendation. All feedback documented. Independent assessment before seeing others feedback.',
              owner: 'Interviewer',
              duration: 'SLA: 48h',
              systems: ['Oracle Recruiting Cloud', 'Interview Scorecard'],
              rules: ['48h feedback SLA mandatory', 'Use standardized scorecard', 'Objective observations only', 'Hire recommendation required', 'Independent assessment first'],
              goodPractice: 'Submit feedback within 48h SLA. Interviewers submit feedback independently to ensure unbiased assessment before group discussion.' },

            { id: 'd1', lane: 1, x: 1040, label: 'Pass?', type: 'decision',
              desc: 'Decision point: Did candidate pass this interview round? Evaluation based on structured scorecard ratings, competency assessment, and interviewer recommendation. Pass proceeds to next round or final review.',
              owner: 'Interviewer',
              duration: 'Instant',
              systems: ['Oracle Recruiting Cloud'],
              rules: ['Structured evaluation', 'Documented decision', 'Competency-based assessment'],
              goodPractice: 'After reviewing applications and interview reports, select candidates whose skills best meet vacancy request needs.' },

            { id: 'reject1', lane: 0, x: 1240, label: 'Rejected', icon: 'fa-times', type: 'reject', meta: 'Not Selected',
              desc: 'Candidate rejected after interview round. Professional rejection communication sent. Regardless of outcome, all applicants receive a response per GEODIS policy. Be prepared to provide more detailed feedback if requested.',
              owner: 'Recruiter',
              duration: '24h',
              systems: ['Oracle Recruiting Cloud', 'Email'],
              rules: ['Professional rejection communication', 'Document rejection reason', 'Detailed feedback available if requested'],
              goodPractice: 'Regardless of the interview outcome, all applicants receive a response - be prepared to provide more detailed feedback.' },

            { id: 'd2', lane: 1, x: 1240, label: 'More?', type: 'decision',
              desc: 'Decision point: Are more interview rounds needed? Senior roles require panel interview with selection committee: direct manager + functional manager + HR representative. Include at least one diversity interviewer per D&I best practice.',
              owner: 'Recruiter / HM',
              duration: 'Instant',
              systems: ['Oracle Recruiting Cloud'],
              rules: ['Senior roles require panel', 'Committee: direct manager + functional manager + HR', 'Include diversity interviewer'],
              goodPractice: 'For positions with functional attachment, ensure selection committee of at least direct manager, functional manager, HR. Include at least one diversity interviewer.' },

            { id: 's5', lane: 3, x: 1460, label: 'Final Review', num: '5', icon: 'fa-gavel', meta: 'Decide',
              desc: 'Hiring Manager reviews all applications and interview reports to select best candidate whose background and skills best meet vacancy request needs. Decision with HR collaboration. System consolidates all feedback into unified view. If no suitable candidate after 6 months, stop recruitment.',
              owner: 'Hiring Manager',
              duration: '1-2 days',
              systems: ['Oracle Recruiting Cloud', 'Decision Dashboard', 'Analytics'],
              rules: ['Review all feedback', 'Document decision rationale', '6-month timeout rule', 'HR collaboration required'],
              goodPractice: 'Select candidates whose background and skills best meet the vacancy request needs. Make reference checks before presenting to Manager.',
              highlighted: true },

            { id: 'd3', lane: 3, x: 1680, label: 'Select?', type: 'decision',
              desc: 'Final decision point: Does hiring manager select this candidate for offer? Decision based on consolidated interview feedback, reference checks (mandatory for white collars), skills alignment, and team fit assessment.',
              owner: 'Hiring Manager',
              duration: 'Instant',
              systems: ['Oracle Recruiting Cloud'],
              rules: ['Final selection documented', 'Reference checks completed', 'HR approval obtained'],
              goodPractice: 'Reference checks are MANDATORY for white collar positions. Verify qualifications before final selection.' },

            { id: 'reject2', lane: 3, x: 1880, label: 'Not Selected', icon: 'fa-times', type: 'reject', meta: 'Reject',
              desc: 'Candidate not selected by hiring manager after final review. May be placed in talent pool for future opportunities. Professional rejection communication sent with offer to stay in touch.',
              owner: 'Hiring Manager',
              duration: '24h',
              systems: ['Oracle Recruiting Cloud', 'Email'],
              rules: ['Professional communication', 'Talent pool consideration', 'Future opportunities offered'],
              goodPractice: 'All applicants receive a response - rejected candidates may be suitable for future opportunities.' },

            { id: 'end', lane: 2, x: 1880, label: 'TO OFFER', icon: 'fa-arrow-right', type: 'end', meta: 'Phase 5',
              desc: 'Candidate selected for offer phase. Proceed to Phase 5: Offer & Contract. The chosen candidate receives a job offer - aim is to make offer within 2 months of interview phase.',
              owner: 'System',
              duration: 'Transition',
              systems: ['Oracle Recruiting Cloud'],
              rules: ['Selection confirmed', 'Offer preparation begins', 'Candidate notified'],
              goodPractice: 'The aim is to make a job offer within two months of the interview phase per GEODIS recruitment policy.' },

            { id: 'track', lane: 4, x: 820, label: 'Track & Aggregate', icon: 'fa-database', type: 'system', meta: 'Auto',
              desc: 'System tracks interview stages and consolidates all feedback into unified candidate assessment view. Aggregates scores across competencies, highlights consensus and divergence, includes candidate experience feedback from surveys.',
              owner: 'Oracle System',
              duration: 'Auto',
              systems: ['Oracle Recruiting Cloud', 'Analytics Dashboard'],
              rules: ['Auto-aggregation', 'Score comparison enabled', 'Consensus highlighting', 'Candidate feedback included'],
              goodPractice: 'Consolidated view enables informed decision-making based on all interviewer perspectives and candidate feedback.' }
        ];

        // Connections data
        const connections = [
            { from: 'start', to: 's1', type: 'forward' },
            { from: 's1', to: 's2', type: 'forward' },
            { from: 's2', to: 's3', type: 'forward' },
            { from: 's3', to: 's4', type: 'forward' },
            { from: 's4', to: 'd1', type: 'forward' },
            { from: 'd1', to: 'reject1', type: 'no', label: 'Fail' },
            { from: 'd1', to: 'd2', type: 'yes', label: 'Pass' },
            { from: 'd2', to: 's1', type: 'return', label: 'More Rounds' },
            { from: 'd2', to: 's5', type: 'yes', label: 'Final' },
            { from: 's5', to: 'd3', type: 'forward' },
            { from: 'd3', to: 'reject2', type: 'no', label: 'Reject' },
            { from: 'd3', to: 'end', type: 'yes', label: 'Select' }
        ];

        // Create steps map for quick lookup
        const stepsMap = {};
        steps.forEach(s => stepsMap[s.id] = s);

        // Lane class names
        const laneClasses = ['lane-recruiter', 'lane-interviewer', 'lane-candidate', 'lane-hiring-manager', 'lane-system'];

        function init() {
            const lanesContent = document.getElementById('lanesContent');

            // Calculate dynamic width
            const maxX = Math.max(...steps.map(s => s.x)) + STEP_WIDTH + 100;
            lanesContent.style.minWidth = maxX + 'px';

            // Create step elements
            steps.forEach(step => {
                const laneRow = document.getElementById('lane' + step.lane);
                if (!laneRow) return;

                const laneClass = laneClasses[step.lane];

                if (step.type === 'decision') {
                    // Decision diamond
                    const block = document.createElement('div');
                    block.className = 'decision-block';
                    block.style.left = step.x + 'px';
                    block.style.top = (V_CENTER - 40) + 'px';
                    block.innerHTML = `
                        <div class="decision-diamond"></div>
                        <div class="decision-content">
                            <div class="decision-id">${step.id.toUpperCase()}</div>
                            <span>${step.label}</span>
                        </div>
                    `;
                    block.onclick = () => showStepModal(step, laneClass);
                    laneRow.appendChild(block);
                } else {
                    // Regular step block
                    const block = document.createElement('div');
                    let blockClass = 'step-block';
                    if (step.type === 'start') blockClass += ' start';
                    else if (step.type === 'end') blockClass += ' end';
                    else if (step.type === 'reject') blockClass += ' reject';
                    else if (step.type === 'system') blockClass += ' lane-system';
                    else blockClass += ' ' + laneClass;
                    if (step.highlighted) blockClass += ' highlighted';

                    block.className = blockClass;
                    block.style.left = step.x + 'px';
                    block.style.top = (V_CENTER - 35) + 'px';

                    const numContent = step.num ? step.num : `<i class="fas ${step.icon}"></i>`;
                    const iconHtml = step.num ? `<i class="fas ${step.icon} step-icon"></i>` : '';

                    block.innerHTML = `
                        <div class="step-header">
                            <span class="step-number">${numContent}</span>
                            ${iconHtml}
                        </div>
                        <div class="step-title">${step.label}</div>
                        <div class="step-meta"><i class="fas fa-info-circle"></i> ${step.meta}</div>
                    `;
                    block.onclick = () => showStepModal(step, laneClass);
                    laneRow.appendChild(block);
                }
            });

            // Draw connections
            drawConnections();
        }

        function drawConnections() {
            const svg = document.getElementById('connectors');
            const maxX = Math.max(...steps.map(s => s.x)) + STEP_WIDTH + 100;
            const totalHeight = 5 * LANE_HEIGHT;
            svg.setAttribute('viewBox', `0 0 ${maxX} ${totalHeight}`);
            svg.style.width = maxX + 'px';
            svg.style.height = totalHeight + 'px';

            let svgContent = '';

            connections.forEach(conn => {
                const from = stepsMap[conn.from];
                const to = stepsMap[conn.to];
                if (!from || !to) return;

                // Calculate connection points
                const fromIsDecision = from.type === 'decision';
                const toIsDecision = to.type === 'decision';

                let fromX, fromY, toX, toY;

                // From point
                if (fromIsDecision) {
                    fromX = from.x + 40;
                    fromY = from.lane * LANE_HEIGHT + V_CENTER;

                    if (conn.type === 'yes' && to.lane > from.lane) {
                        fromY = from.lane * LANE_HEIGHT + V_CENTER + 28;
                    } else if (conn.type === 'yes' && to.lane < from.lane) {
                        fromY = from.lane * LANE_HEIGHT + V_CENTER - 28;
                    } else if (conn.type === 'no') {
                        if (to.lane < from.lane) {
                            fromY = from.lane * LANE_HEIGHT + V_CENTER - 28;
                        } else {
                            fromX = from.x + 80;
                        }
                    } else if (conn.type === 'return') {
                        fromY = from.lane * LANE_HEIGHT + V_CENTER - 28;
                    } else {
                        fromX = from.x + 80;
                    }
                } else {
                    fromX = from.x + STEP_WIDTH;
                    fromY = from.lane * LANE_HEIGHT + V_CENTER;

                    if (to.lane > from.lane) {
                        fromX = from.x + STEP_WIDTH / 2;
                        fromY = from.lane * LANE_HEIGHT + V_CENTER + 35;
                    } else if (to.lane < from.lane) {
                        fromX = from.x + STEP_WIDTH / 2;
                        fromY = from.lane * LANE_HEIGHT + V_CENTER - 35;
                    }
                }

                // To point
                if (toIsDecision) {
                    toX = to.x;
                    toY = to.lane * LANE_HEIGHT + V_CENTER;

                    if (from.lane !== to.lane) {
                        if (from.lane < to.lane) {
                            toY = to.lane * LANE_HEIGHT + V_CENTER - 28;
                        } else {
                            toY = to.lane * LANE_HEIGHT + V_CENTER + 28;
                        }
                        toX = to.x + 40;
                    }
                } else {
                    toX = to.x;
                    toY = to.lane * LANE_HEIGHT + V_CENTER;

                    if (from.lane < to.lane) {
                        toX = to.x + STEP_WIDTH / 2;
                        toY = to.lane * LANE_HEIGHT + V_CENTER - 35;
                    } else if (from.lane > to.lane) {
                        toX = to.x + STEP_WIDTH / 2;
                        toY = to.lane * LANE_HEIGHT + V_CENTER + 35;
                    }
                }

                // Special handling for return loop
                if (conn.type === 'return') {
                    const loopY = 20;
                    const pathD = `M ${fromX} ${fromY}
                                   L ${fromX} ${loopY}
                                   L ${toX + STEP_WIDTH / 2} ${loopY}
                                   L ${toX + STEP_WIDTH / 2} ${toY - 35}`;
                    svgContent += `<path d="${pathD}" class="connector-path return animated"/>`;

                    const ax = toX + STEP_WIDTH / 2;
                    const ay = toY - 35;
                    svgContent += `<polygon points="${ax - 5},${ay - 8} ${ax + 5},${ay - 8} ${ax},${ay}" fill="#8B5CF6"/>`;

                    if (conn.label) {
                        svgContent += `<text x="${(fromX + toX + STEP_WIDTH / 2) / 2}" y="${loopY - 5}" class="connector-label" fill="#8B5CF6">${conn.label}</text>`;
                    }
                    return;
                }

                let pathD;
                const pathClass = `connector-path ${conn.type}`;

                if (from.lane === to.lane) {
                    pathD = `M ${fromX} ${fromY} L ${toX} ${toY}`;
                } else {
                    const midX = fromX + (toX - fromX) / 2;
                    pathD = `M ${fromX} ${fromY} C ${midX} ${fromY}, ${midX} ${toY}, ${toX} ${toY}`;
                }

                svgContent += `<path d="${pathD}" class="${pathClass}"/>`;

                const arrowColor = conn.type === 'yes' ? '#10B981' :
                                   conn.type === 'no' ? '#EF4444' :
                                   conn.type === 'return' ? '#8B5CF6' : '#3200eb';

                let angle = Math.atan2(toY - fromY, toX - fromX);
                if (from.lane !== to.lane) {
                    if (toY > fromY) angle = Math.PI / 2;
                    else if (toY < fromY) angle = -Math.PI / 2;
                }

                const arrowSize = 8;
                const ax = toX;
                const ay = toY;

                const p1x = ax - arrowSize * Math.cos(angle - 0.4);
                const p1y = ay - arrowSize * Math.sin(angle - 0.4);
                const p2x = ax - arrowSize * Math.cos(angle + 0.4);
                const p2y = ay - arrowSize * Math.sin(angle + 0.4);

                svgContent += `<polygon points="${ax},${ay} ${p1x},${p1y} ${p2x},${p2y}" fill="${arrowColor}"/>`;

                if (conn.label) {
                    const labelX = fromX + (toX - fromX) * 0.5;
                    const labelY = fromY + (toY - fromY) * 0.5 - 8;
                    const labelColor = conn.type === 'yes' ? '#10B981' :
                                       conn.type === 'no' ? '#EF4444' : '#8B5CF6';
                    svgContent += `<text x="${labelX}" y="${labelY}" class="connector-label" fill="${labelColor}">${conn.label}</text>`;
                }
            });

            svg.innerHTML = svgContent;
        }

        function showStepModal(step, laneClass) {
            const modal = document.getElementById('modal');
            const icon = document.getElementById('modalIcon');
            const title = document.getElementById('modalTitleText');
            const body = document.getElementById('modalBody');

            const colorMap = {
                'lane-recruiter': 'var(--lane-recruiter)',
                'lane-interviewer': 'var(--lane-interviewer)',
                'lane-candidate': 'var(--lane-candidate)',
                'lane-hiring-manager': 'var(--lane-hiring-manager)',
                'lane-system': 'var(--lane-system)'
            };

            let iconColor = colorMap[laneClass] || 'var(--geodis-blue)';
            if (step.type === 'start') iconColor = 'var(--geodis-green)';
            if (step.type === 'end') iconColor = 'var(--geodis-purple)';
            if (step.type === 'reject') iconColor = 'var(--geodis-red)';
            if (step.type === 'decision') iconColor = 'var(--geodis-orange)';

            icon.style.background = iconColor;
            icon.innerHTML = `<i class="fas ${step.icon || 'fa-question'}"></i>`;
            title.textContent = step.label;

            let systemsTags = '';
            if (step.systems && step.systems.length > 0) {
                systemsTags = step.systems.map(s => `<span class="tag">${s}</span>`).join('');
            } else {
                systemsTags = '<span class="tag">Oracle Recruiting Cloud</span>';
            }

            let rulesList = '';
            if (step.rules && step.rules.length > 0) {
                rulesList = step.rules.map(r => `<li><i class="fas fa-check-circle"></i> ${r}</li>`).join('');
            } else {
                rulesList = `
                    <li><i class="fas fa-check-circle"></i> Follow GEODIS standard process</li>
                    <li><i class="fas fa-check-circle"></i> Document all decisions</li>
                    <li><i class="fas fa-check-circle"></i> Meet SLA requirements</li>
                `;
            }

            let goodPracticeHtml = '';
            if (step.goodPractice) {
                goodPracticeHtml = `
                    <div class="modal-section" style="background: var(--geodis-orange-light); padding: 1rem; border-radius: var(--radius); border-left: 4px solid var(--geodis-orange);">
                        <h4 style="color: var(--geodis-orange);"><i class="fas fa-lightbulb"></i> GEODIS Good Practice</h4>
                        <p style="font-style: italic; color: var(--gray-700);">"${step.goodPractice}"</p>
                    </div>
                `;
            }

            body.innerHTML = `
                <div class="modal-section">
                    <h4><i class="fas fa-info-circle"></i> Description</h4>
                    <p>${step.desc || 'Process step in the recruitment workflow.'}</p>
                </div>
                <div class="info-row">
                    <div class="info-box">
                        <label>Owner / Responsible</label>
                        <span>${step.owner || 'Various'}</span>
                    </div>
                    <div class="info-box">
                        <label>Duration / SLA</label>
                        <span>${step.duration || step.meta}</span>
                    </div>
                </div>
                <div class="modal-section">
                    <h4><i class="fas fa-cog"></i> Systems & Tools</h4>
                    <div class="tag-list">
                        ${systemsTags}
                    </div>
                </div>
                <div class="modal-section">
                    <h4><i class="fas fa-gavel"></i> Key Rules & Requirements</h4>
                    <ul class="rule-list">
                        ${rulesList}
                    </ul>
                </div>
                ${goodPracticeHtml}
            `;

            modal.classList.add('active');
        }

        function closeModal() {
            document.getElementById('modal').classList.remove('active');
        }

        // Zoom controls
        let currentZoom = 1;
        const diagram = document.getElementById('diagram');

        function zoomIn() { currentZoom = Math.min(currentZoom + 0.1, 2); applyZoom(); }
        function zoomOut() { currentZoom = Math.max(currentZoom - 0.1, 0.5); applyZoom(); }
        function resetZoom() { currentZoom = 1; applyZoom(); }
        function applyZoom() {
            diagram.style.transform = `scale(${currentZoom})`;
            diagram.style.transformOrigin = 'top left';
        }

        // Modal close on overlay click
        document.getElementById('modal').addEventListener('click', (e) => {
            if (e.target.id === 'modal') closeModal();
        });

        // Close modal on Escape key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') closeModal();
        });

        // Initialize on load
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
